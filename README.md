# Роботизированный Центр

Добро пожаловать в Роботизированный Центр (R4C) 

Чтобы запустить проект на вашей локальной машине, выполните следующие шаги:

1. **Клонирование репозитория**

   Сначала склонируйте репозиторий по ссылке 
```
git clone https://github.com/Ydtalel/R4C.git
```

2. **Установка зависимостей**

Перейдите в каталог проекта и установите зависимости:

cd R4C
pip install -r requirements.txt

3. **Применение миграций**

Выполните миграции для создания базы данных:
```
python manage.py migrate
```

4. **Создание суперпользователя**

Для удобства работы с админ-панелью создайте суперпользователя:
```
python manage.py createsuperuser
```
Следуйте инструкциям, чтобы создать суперпользователя.

5. **Запуск сервера**

Теперь вы можете запустить сервер разработки Django:
```
python manage.py runserver
```
Ваш проект будет доступен по адресу [http://127.0.0.1:8000/](http://127.0.0.1:8000/).

## Запуск проекта в ветке "main"


_____________________________________________________________________
## Функциональность

### Добавление робота

Для добавления робота в базу данных вы можете использовать API. Например, с помощью Postman отправьте POST-запрос на URL [http://127.0.0.1:8000/api/create-robot/](http://127.0.0.1:8000/api/create-robot/).

В теле запроса выберите параметр `row` и укажите данные в формате JSON.   
Пример входных данных:

```json
{
 "model": "R2",
 "version": "D2",
 "created": "2022-12-31 23:59:59"
}
```
### Скачать Excel-файл

Для скачивания Excel-файла с данными перейдите по адресу 
```
http://127.0.0.1:8000/download-report/
```
### Рассылка писем


Для отправки уведомлений клиентам о наличии товаров, которых ранее не было в наличии, выполните следующие шаги:

- Создайте заказ с товарами, которых нет в наличии.
- Измените признак доступности товара на "true" (в наличии) в админ-панели или через API.

После этого клиенты получат уведомления на свои email адреса.
## Запуск проекта в ветке "test".
_________________________________________________
### Здесь добавлен функционал отправки писем через rabbitmq и кеш redis при добавлении робота

### Установка Docker
Установите Docker на своей машине, следуя инструкциям на [официальном сайте Docker](https://www.docker.com/get-started).


Для запуска проекта в ветке "test" на вашей локальной машине, вам потребуется установить и настроить Redis и RabbitMQ. Вот как это сделать:
### Установка и запуск Redis:
Вы можете использовать Docker, чтобы быстро развернуть Redis:
```
docker run -d --name my-redis-container -p 6379:6379 redis
```

### Установка и запуск RabbitMQ:

С помощью Docker можно развернуть RabbitMQ:
```
docker run -it --rm --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:management
```
В новом терминале запустите
```
celery -A R4C worker -l info
```

### Настройка отправки почты:

Для настройки отправки почты вам понадобятся следующие данные:

    EMAIL_BACKEND: Выберите бэкенд для отправки почты. Например, 'django.core.mail.backends.smtp.EmailBackend'.

    EMAIL_HOST: Укажите хост почтового сервера. Например, 'smtp.mail.ru' (это пример для почтового провайдера Mail.ru).

    EMAIL_PORT: Укажите порт почтового сервера. Например, 465.

    EMAIL_HOST_USER: Ваш логин (адрес электронной почты) на почтовом сервере.

    EMAIL_HOST_PASSWORD: Ваш пароль от почтового сервера.

    EMAIL_USE_TLS и EMAIL_USE_SSL: Установите True или False в зависимости от требований вашего почтового провайдера.

Дополнительную информацию о настройке отправки почты в Django вы можете найти в [этой статье](https://django.fun/en/docs/django/4.2/topics/email/)
.   
Теперь можно создать заказ что бы проверить, что клиенту будет приходить письмо о том, что его модель робота стала доступной.
